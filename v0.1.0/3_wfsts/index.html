<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Contructing WFSTs · FiniteStateTransducers</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="FiniteStateTransducers logo"/></a><div class="docs-package-name"><span class="docs-autofit">FiniteStateTransducers</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../1_intro/">Introduction</a></li><li><a class="tocitem" href="../2_semirings/">Weights</a></li><li class="is-active"><a class="tocitem" href>Contructing WFSTs</a><ul class="internal"><li><a class="tocitem" href="#Formal-definition"><span>Formal definition</span></a></li><li><a class="tocitem" href="#Constructors-and-modifiers"><span>Constructors and modifiers</span></a></li><li><a class="tocitem" href="#Internal-access"><span>Internal access</span></a></li><li><a class="tocitem" href="#Arcs"><span>Arcs</span></a></li><li><a class="tocitem" href="#Paths"><span>Paths</span></a></li><li><a class="tocitem" href="#Tour-of-the-internals"><span>Tour of the internals</span></a></li><li><a class="tocitem" href="#Epsilon-label"><span>Epsilon label</span></a></li><li><a class="tocitem" href="#Properties"><span>Properties</span></a></li><li><a class="tocitem" href="#Other-constructors"><span>Other constructors</span></a></li></ul></li><li><a class="tocitem" href="../4_algorithms/">Algorithms</a></li><li><a class="tocitem" href="../5_io/">I/O</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Contructing WFSTs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Contructing WFSTs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/master/docs/src/3_wfsts.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="WFSTs-internals"><a class="docs-heading-anchor" href="#WFSTs-internals">WFSTs internals</a><a id="WFSTs-internals-1"></a><a class="docs-heading-anchor-permalink" href="#WFSTs-internals" title="Permalink"></a></h1><h2 id="Formal-definition"><a class="docs-heading-anchor" href="#Formal-definition">Formal definition</a><a id="Formal-definition-1"></a><a class="docs-heading-anchor-permalink" href="#Formal-definition" title="Permalink"></a></h2><p>Formally a WFSTs over the semiring <span>$\mathbb{W}$</span> is the tuple <span>$(\mathcal{A},\mathcal{B},Q,I,F,E,\lambda,\rho)$</span> where:</p><ul><li><span>$\mathcal{A}$</span> is the input alphabet (set of input labels)</li><li><span>$\mathcal{B}$</span> is the output alphabet (set of output labels)</li><li><span>$Q$</span> is a set of states (usually integers)</li><li><span>$I \subseteq Q$</span> is the set of initial states</li><li><span>$F \subseteq Q$</span> is the set of final states</li><li><span>$E \subseteq Q \times \mathcal{A} \cup \{ \epsilon \} \times \mathcal{B} \cup \{ \epsilon \} \times \mathbb{W} \times Q$</span> is a set of arcs (transitions) where an element consist of the tuple (starting state,input label, output label, weigth, destination state)</li><li><span>$\lambda : I \rightarrow \mathbb{W}$</span> a function that maps initial states to a weight </li><li><span>$\rho : F \rightarrow \mathbb{W}$</span> a function that maps final states to a weight </li></ul><h2 id="Constructors-and-modifiers"><a class="docs-heading-anchor" href="#Constructors-and-modifiers">Constructors and modifiers</a><a id="Constructors-and-modifiers-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors-and-modifiers" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.WFST" href="#FiniteStateTransducers.WFST"><code>FiniteStateTransducers.WFST</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>WFST(isym, [osym]; W = TropicalWeight{Float32})</code></p><p>Construct an empty Weighted Finite State Transducer (WFST)</p><ul><li><code>isym</code> input symbol table (can be a dictionary or a vector)</li><li><code>osym</code> output symbol dictionary (optional)</li><li><code>W</code> weight type</li></ul><p>If the symbol table are <code>AbstractDict{I,D}</code>, <code>D</code> must be an integer and <code>I</code> the type of the symbol.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L18-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.add_arc!" href="#FiniteStateTransducers.add_arc!"><code>FiniteStateTransducers.add_arc!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>add_arc!(fst, src, dest, ilabel, olabel[, w=one(W)])</code></p><p><code>add_arc!(fst, srcdest::Pair, ilabelolabel::Pair[, w=one(W)])</code></p><p>Adds an arc from state <code>src</code> to state <code>dest</code> with input label <code>ilabel</code>, output label <code>olabel</code> and weight <code>w</code>. Alternative notation utilizes <code>Pair</code>s.</p><p>If <code>w</code> is not provided this defaults to <code>one(W)</code> where <code>W</code> is the weight type of <code>fst</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L174-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.add_states!" href="#FiniteStateTransducers.add_states!"><code>FiniteStateTransducers.add_states!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>add_states!(fst,N)</code></p><p>Add <code>N</code> empty states to the FST.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.initial!" href="#FiniteStateTransducers.initial!"><code>FiniteStateTransducers.initial!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>initial!(fst::WFST{W},i, [w=one(W)])</code></p><p>Set the <code>i</code>-th state as a initial state. A weight <code>w</code> can also be provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L94-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.final!" href="#FiniteStateTransducers.final!"><code>FiniteStateTransducers.final!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>final!(fst::WFST{W},i, [w=one(W)])</code></p><p>Set the <code>i</code>-th state as a final state. A weight <code>w</code> can also be provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.rm_final!" href="#FiniteStateTransducers.rm_final!"><code>FiniteStateTransducers.rm_final!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>rm_final!(fst,i)</code></p><p>Remove final state labeling of the <code>i</code>-th state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L158-L162">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.rm_initial!" href="#FiniteStateTransducers.rm_initial!"><code>FiniteStateTransducers.rm_initial!</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>rm_initial!(fst,i)</code></p><p>Remove initial state labeling of the state <code>i</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L105-L109">source</a></section></article><h2 id="Internal-access"><a class="docs-heading-anchor" href="#Internal-access">Internal access</a><a id="Internal-access-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-access" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_isym" href="#FiniteStateTransducers.get_isym"><code>FiniteStateTransducers.get_isym</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_isym(fst::WFST)</code></p><p>Returns the input symbol table of <code>fst</code>. The table consists of a dictionary where each element goes from the symbol to the corresponding index.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/sym.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_iisym" href="#FiniteStateTransducers.get_iisym"><code>FiniteStateTransducers.get_iisym</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_iisym(fst::WFST)</code></p><p>Returns the inverted input symbol table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/sym.jl#L13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_osym" href="#FiniteStateTransducers.get_osym"><code>FiniteStateTransducers.get_osym</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_osym(fst::WFST)</code></p><p>Returns the output symbol table of <code>fst</code>. The table consists of a dictionary where each element goes from the symbol to the corresponding index. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/sym.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_iosym" href="#FiniteStateTransducers.get_iosym"><code>FiniteStateTransducers.get_iosym</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_iosym(fst::WFST)</code></p><p>Returns the inverted output symbol table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/sym.jl#L29-L33">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_states" href="#FiniteStateTransducers.get_states"><code>FiniteStateTransducers.get_states</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_states(fst::WFST)</code></p><p>Returns the states the <code>fst</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L166-L170">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_initial" href="#FiniteStateTransducers.get_initial"><code>FiniteStateTransducers.get_initial</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_initial(fst::WFST, [single=false])</code></p><p>Returns the initial state id of the <code>fst</code>. If <code>single</code> is <code>true</code> the first initial state is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L61-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_initial_weight" href="#FiniteStateTransducers.get_initial_weight"><code>FiniteStateTransducers.get_initial_weight</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_initial_weight(fst::WFST,i)</code></p><p>Returns the weight of initial <code>i</code>-th state of <code>fst</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_final" href="#FiniteStateTransducers.get_final"><code>FiniteStateTransducers.get_final</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_final(fst::WFST, [single=false])</code></p><p>Returns the final state id of the <code>fst</code>. If <code>single</code> is <code>true</code> the first final state is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L113-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_final_weight" href="#FiniteStateTransducers.get_final_weight"><code>FiniteStateTransducers.get_final_weight</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_final_weight(fst::WFST,i)</code></p><p>Returns the weight of <code>i</code>-th final state of <code>fst</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L130-L134">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_ialphabet" href="#FiniteStateTransducers.get_ialphabet"><code>FiniteStateTransducers.get_ialphabet</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_ialphabet(label::fst)</code></p><p>Returns the alphabet of the input labels of <code>fst</code>. The alphabet is defined as the set of symbols composing the input or output labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L13-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_oalphabet" href="#FiniteStateTransducers.get_oalphabet"><code>FiniteStateTransducers.get_oalphabet</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_oalphabet(label::fst)</code></p><p>Returns the alphabet of the output labels of <code>fst</code>. The alphabet is defined as the set of symbols composing the input or output labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L22-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_arcs" href="#FiniteStateTransducers.get_arcs"><code>FiniteStateTransducers.get_arcs</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_arcs(fst::WFST) = ArcIterator(fst)</code></p><p>Returns an iterator that can be used to loop through all of the arcs of <code>fst</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L255-L259">source</a></section></article><h2 id="Arcs"><a class="docs-heading-anchor" href="#Arcs">Arcs</a><a id="Arcs-1"></a><a class="docs-heading-anchor-permalink" href="#Arcs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.Arc" href="#FiniteStateTransducers.Arc"><code>FiniteStateTransducers.Arc</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>Arc(ilab::Int,olab::Int,w::W,n::Int)</code></p><p>Constructs an arc with input label <code>ilab</code>, output label <code>olab</code>, weight &#39;weight&#39; and nextstate <code>n</code>. <code>ilab</code> and <code>olab</code> must be integers consistent with a input/output symbol table of the WFST at use.</p><p>Mainly used for internals see <a href="#FiniteStateTransducers.add_arc!"><code>add_arc!</code></a> for a simpler way of adding arcs to a WFST.   </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/arc.jl#L5-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_ilabel" href="#FiniteStateTransducers.get_ilabel"><code>FiniteStateTransducers.get_ilabel</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_ilabel(A::Arc)</code></p><p>Returns the input label index of the arc <code>A</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/arc.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_olabel" href="#FiniteStateTransducers.get_olabel"><code>FiniteStateTransducers.get_olabel</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_olabel(A::Arc)</code></p><p>Returns the input label index of the arc <code>A</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/arc.jl#L59-L63">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_weight" href="#FiniteStateTransducers.get_weight"><code>FiniteStateTransducers.get_weight</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_weight(A::Arc)</code></p><p>Returns the weight the arc <code>A</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/arc.jl#L66-L70">source</a></section><section><div><p><code>get_weight(fst::WFST,i)</code></p><p>Returns the weight of the <code>i</code>-th state of <code>fst</code>. If there is no weight <code>nothing</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L263-L267">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_nextstate" href="#FiniteStateTransducers.get_nextstate"><code>FiniteStateTransducers.get_nextstate</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_nextstate(A::Arc)</code></p><p>Returns the state that the arc <code>A</code> is pointing to.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/arc.jl#L73-L77">source</a></section></article><h2 id="Paths"><a class="docs-heading-anchor" href="#Paths">Paths</a><a id="Paths-1"></a><a class="docs-heading-anchor-permalink" href="#Paths" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.Path" href="#FiniteStateTransducers.Path"><code>FiniteStateTransducers.Path</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>Path(isym[,osym], iolabel::Pair, w=one(TropicalWeight{Float32}))</code></p><p>Construct a path with input and output symbol table <code>isym</code> and (optional) <code>osym</code> (see <a href="#FiniteStateTransducers.WFST"><code>WFST</code></a>).</p><p><code>iolabel</code> is a <code>Pair</code> of vectors.</p><pre><code class="language-julia">julia&gt; isym = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;];

julia&gt; osym = [&quot;α&quot;,&quot;β&quot;,&quot;γ&quot;,&quot;δ&quot;];

julia&gt; W = ProbabilityWeight{Float32};

julia&gt; p = Path(isym,osym,[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;] =&gt; [&quot;α&quot;,&quot;β&quot;,&quot;γ&quot;], one(W))
[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] → [&quot;α&quot;, &quot;β&quot;, &quot;γ&quot;], w:1.0f0
</code></pre><p>The weight of a path of a WFST results from the multiplication (<span>$\otimes$</span>) of the weights of the different arcs that are transversed. See e.g. <a href="../4_algorithms/#FiniteStateTransducers.get_paths"><code>get_paths</code></a> to extract paths from a WFST.</p><pre><code class="language-julia">julia&gt; p * Path(isym,osym,[&quot;d&quot;] =&gt; [&quot;δ&quot;], W(0.5))
[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;] → [&quot;α&quot;, &quot;β&quot;, &quot;γ&quot;, &quot;δ&quot;], w:0.5f0
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/path.jl#L15-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_isequence" href="#FiniteStateTransducers.get_isequence"><code>FiniteStateTransducers.get_isequence</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_isequence(p::Path)</code></p><p>Returns the input sequence of the path <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/path.jl#L61-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_osequence" href="#FiniteStateTransducers.get_osequence"><code>FiniteStateTransducers.get_osequence</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_osequence(p::Path)</code></p><p>Returns the output sequence of the path <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/path.jl#L72-L76">source</a></section></article><h2 id="Tour-of-the-internals"><a class="docs-heading-anchor" href="#Tour-of-the-internals">Tour of the internals</a><a id="Tour-of-the-internals-1"></a><a class="docs-heading-anchor-permalink" href="#Tour-of-the-internals" title="Permalink"></a></h2><p>Let&#39;s build a simple WFST and check out its internals: </p><pre><code class="language-julia">julia&gt; using FiniteStateTransducers

julia&gt; A = WFST([&quot;hello&quot;,&quot;world&quot;],[:ciao,:mondo]);

julia&gt; add_arc!(A,1=&gt;2,&quot;hello&quot;=&gt;:ciao);

julia&gt; add_arc!(A,1=&gt;3,&quot;world&quot;=&gt;:mondo);

julia&gt; add_arc!(A,2=&gt;3,&quot;world&quot;=&gt;:mondo);

julia&gt; initial!(A,1);

julia&gt; final!(A,3)
WFST #states: 3, #arcs: 3, #isym: 2, #osym: 2
|1/0.0f0|
hello:ciao/0.0f0 → (2)
world:mondo/0.0f0 → (3)
(2)
world:mondo/0.0f0 → (3)
((3/0.0f0))
</code></pre><p>For this simple WFST the states consists of an <code>Array</code> of <code>Array</code>s containing <code>Arc</code>:</p><pre><code class="language-julia">julia&gt; get_states(A)
3-element Array{Array{FiniteStateTransducers.Arc{TropicalWeight{Float32},Int64},1},1}:
 [1:1/0.0f0 → (2), 2:2/0.0f0 → (3)]
 [2:2/0.0f0 → (3)]
 []</code></pre><p>As it can be seen the first state has two arcs, second state only one and the final state none. A state can also be accessed as follows:</p><pre><code class="language-julia">julia&gt; A[2]
1-element Array{FiniteStateTransducers.Arc{TropicalWeight{Float32},Int64},1}:
 2:2/0.0f0 → (3)</code></pre><p>Here the arc&#39;s input/output labels are displayed as integers. We would expect <code>world:mondo/0.0f0 → (3)</code> instead of <code>2:2/0.0f0 → (3)</code>.  This is due to fact that, contrary to the formal definition, labels are not stored directly in the arcs but an index is used instead, which corresponds to the input/output symbol table:</p><pre><code class="language-julia">julia&gt; get_isym(A)
Dict{String,Int64} with 2 entries:
  &quot;hello&quot; =&gt; 1
  &quot;world&quot; =&gt; 2

julia&gt; get_osym(A)
Dict{Symbol,Int64} with 2 entries:
  :mondo =&gt; 2
  :ciao  =&gt; 1</code></pre><p>Another difference is in the definition of <span>$I$</span>, <span>$F$</span>, <span>$\lambda$</span> and <span>$\rho$</span>. These are also represented by dictionaries that can be accessed using the functions <a href="#FiniteStateTransducers.get_initial"><code>get_initial</code></a> and <a href="#FiniteStateTransducers.get_final"><code>get_final</code></a>.</p><pre><code class="language-julia">julia&gt; get_final(A)
Dict{Int64,TropicalWeight{Float32}} with 1 entry:
  3 =&gt; 0.0
</code></pre><h2 id="Epsilon-label"><a class="docs-heading-anchor" href="#Epsilon-label">Epsilon label</a><a id="Epsilon-label-1"></a><a class="docs-heading-anchor-permalink" href="#Epsilon-label" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.iseps" href="#FiniteStateTransducers.iseps"><code>FiniteStateTransducers.iseps</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>iseps(x)</code></p><p>Checks if <code>x</code> is the epsilon label. Defined only for <code>String</code> and <code>Int</code>, where <code>&lt;eps&gt;</code> and <code>0</code> are the epsilon symbols. Extend this method if you want to create WFST with a user defined type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/epsilon.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.get_eps" href="#FiniteStateTransducers.get_eps"><code>FiniteStateTransducers.get_eps</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>get_eps(x::Type)</code></p><p>Returns the epsilon label for a given <code>Type</code>. Defined only for <code>String</code> and <code>Int</code>, where <code>&lt;eps&gt;</code> and <code>0</code> are the epsilon symbols. Extend this method if you want to create WFST with a user defined type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/epsilon.jl#L15-L19">source</a></section></article><p>By default <code>0</code> indicates the epsilon label which is not present in the symbol table.</p><p>Currently the following epsilon symbols are reserved for the following types:</p><table><tr><th style="text-align: center">Type</th><th style="text-align: center">Label</th></tr><tr><td style="text-align: center"><code>Char</code></td><td style="text-align: center"><code>&#39;ϵ&#39;</code></td></tr><tr><td style="text-align: center"><code>String</code></td><td style="text-align: center"><code>&quot;&lt;eps&gt;&quot;</code></td></tr><tr><td style="text-align: center"><code>Int</code></td><td style="text-align: center"><code>0</code></td></tr></table><p>We can define a particular type by extending the functions <a href="#FiniteStateTransducers.iseps"><code>iseps</code></a> and <a href="#FiniteStateTransducers.get_eps"><code>get_eps</code></a>. For example if we want to introduce an epsilon symbol for the type <code>Symbol</code>:</p><pre><code class="language-none">julia&gt; FiniteStateTransducers.iseps(x::Symbol) = x == :eps;

julia&gt; FiniteStateTransducers.get_eps(x::Type{Symbol}) = :eps;

julia&gt; add_arc!(A,3=&gt;3,&quot;world&quot;=&gt;:eps)
WFST #states: 3, #arcs: 5, #isym: 2, #osym: 2
|1/0.0f0|
hello:ciao/0.0f0 → (2)
world:mondo/0.0f0 → (3)
(2)
world:mondo/0.0f0 → (3)
((3/0.0f0))
world:ϵ/0.0f0 → (3)

julia&gt; A[3]
1-element Array{Arc{TropicalWeight{Float32},Int64},1}:
 2:0/0.0f0 → (3)</code></pre><h2 id="Properties"><a class="docs-heading-anchor" href="#Properties">Properties</a><a id="Properties-1"></a><a class="docs-heading-anchor-permalink" href="#Properties" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Base.length" href="#Base.length"><code>Base.length</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>length(fst::WFST)</code></p><p>Returns the number of states of the fst.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L148-L152">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.size" href="#Base.size"><code>Base.size</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>size(fst::WFST,[i])</code></p><p>Returns number of states and total number of arcs in a tuple. If &#39;i=1&#39; returns the number of states and if <code>i=2</code> the number of arcs. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L155-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.isinitial" href="#FiniteStateTransducers.isinitial"><code>FiniteStateTransducers.isinitial</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>isinitial(fst::WFST, i)</code></p><p>Check if the <code>i</code>-th state is an initial state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L86-L90">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.isfinal" href="#FiniteStateTransducers.isfinal"><code>FiniteStateTransducers.isfinal</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>isfinal(fst::WFST, i)</code></p><p>Check if the <code>i</code>-th state is an final state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/wfst.jl#L138-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.typeofweight" href="#FiniteStateTransducers.typeofweight"><code>FiniteStateTransducers.typeofweight</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>typeofweight(fst_or_path)</code></p><p>Returns the weight type of a WFST or a path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.has_eps" href="#FiniteStateTransducers.has_eps"><code>FiniteStateTransducers.has_eps</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>has_eps([label::Function,] fst::FST)</code></p><p>Check if <code>fst</code> has epsilon transition in either input or output labels. To specify input or output plug in either <code>get_ilabel</code> or <code>get_olabel</code> respectively in <code>label</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L50-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.count_eps" href="#FiniteStateTransducers.count_eps"><code>FiniteStateTransducers.count_eps</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>count_eps(label::Function, fst::FST)</code></p><p>Returns number of epsilon transition of either input or output labels. To specify input or output plug in <code>ilabel</code> and <code>olabel</code> respectively in <code>label</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L31-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.is_acceptor" href="#FiniteStateTransducers.is_acceptor"><code>FiniteStateTransducers.is_acceptor</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>is_acceptor(fst::WFST)</code></p><p>Returns <code>true</code> if <code>fst</code> is an acceptor, i.e. if all arcs have equal input and output labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L82-L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.is_acyclic" href="#FiniteStateTransducers.is_acyclic"><code>FiniteStateTransducers.is_acyclic</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>is_acyclic(fst::WFST[,i = get_initial(fst;single=true)]; kwargs...)</code></p><p>Returns the number of states of the fst. For <code>kwargs</code> see <a href="../4_algorithms/#FiniteStateTransducers.DFS"><code>DFS</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L126-L130">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.is_deterministic" href="#FiniteStateTransducers.is_deterministic"><code>FiniteStateTransducers.is_deterministic</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>is_deterministic(fst::WFST; get_label=get_ilabel)</code></p><p>Returns <code>true</code> if <code>fst</code> is deterministic in the input labels. A input label deterministic WFST must have a single initial state and arcs leaving any state do not share the same input label.</p><p>Change the keyword <code>get_label</code> to <code>get_olabel</code> in order to check determinism in the output labels.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/properties.jl#L101-L108">source</a></section></article><h2 id="Other-constructors"><a class="docs-heading-anchor" href="#Other-constructors">Other constructors</a><a id="Other-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Other-constructors" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.linearfst" href="#FiniteStateTransducers.linearfst"><code>FiniteStateTransducers.linearfst</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>linearfst(ilabels,olabels,w,isym,[osym])</code></p><p>Creates a linear WFST. <code>ilabels</code>, <code>olabels</code> and <code>w</code> are the input labels, output labels and weights respectively which must be vectors of the same size.  Keyword arguments are the same of <code>WFST</code> constructor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/other_constr.jl#L5-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FiniteStateTransducers.matrix2wfst" href="#FiniteStateTransducers.matrix2wfst"><code>FiniteStateTransducers.matrix2wfst</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>matrix2wfst(isym,[osym,] X; W = TropicalWeight{Float32})</code></p><p>Creates a WFST with weight type <code>W</code> and input output tables <code>isym</code> and <code>osym</code> using the matrix <code>X</code>. If <code>X</code> is a matrix of dimensions <code>Ns</code>x<code>Nt</code>, the resulting fst will have <code>Nt+1</code> states. Arcs form the <code>t</code>-th state of <code>fst</code> will go only to the <code>t+1</code>-th state and will correspond to the non-zero element of the <code>t</code>-th column of <code>X</code>.  State <code>1</code> and <code>Nt+1</code> are initial and final state, respectively.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/idiap/FiniteStateTransducers.jl/blob/d58c0a2406379c7c6e8d371a3970776b8af4cd1e/src/other_constr.jl#L33-L40">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../2_semirings/">« Weights</a><a class="docs-footer-nextpage" href="../4_algorithms/">Algorithms »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 12 February 2021 17:16">Friday 12 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
